(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],Array(18).concat([function(t,e,a){t.exports=a.p+"static/media/Loading.422dc8f0.gif"},,function(t,e,a){t.exports=a.p+"static/media/Folder.cc300e12.png"},,,,,function(t,e,a){t.exports=a.p+"static/media/BerdBoxLogo.4d22136b.png"},function(t,e,a){t.exports=a.p+"static/media/Picture.3a87b6d5.png"},function(t,e,a){t.exports=a.p+"static/media/Movie.02c5b766.gif"},function(t,e,a){t.exports=a.p+"static/media/txt.56fc3700.png"},function(t,e,a){t.exports=a.p+"static/media/sound.c9d38e51.png"},,,function(t,e,a){t.exports=a.p+"static/media/sad.1494db0b.png"},function(t,e,a){t.exports=a(51)},,,,,function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){},,,function(t,e,a){},,,,function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),c=a(24),l=a.n(c),o=(a(38),a(2)),s=a(3),r=a(5),d=a(4),u=a(6),p=a(16),h=a(14),f=a(7),m=(a(39),a(25)),b=a.n(m),v=(a(40),function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return i.a.createElement("a",{href:this.props.action,className:"account-details-button",onClick:this.props.handler},i.a.createElement("i",{className:"material-icons"},this.props.icon),i.a.createElement("span",null,this.props.text))}}]),e}(i.a.Component)),g=(a(41),function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(r.a)(this,Object(d.a)(e).call(this))).state={imageURL:""},t}return Object(u.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this;fetch("/api/account-img").then((function(t){return t.json()})).then((function(e){console.log(e),t.setState({imageURL:e})}))}},{key:"render",value:function(){return i.a.createElement("img",{className:"account-img",src:this.state.imageURL,onClick:this.props.toggleAccountDetails})}}]),e}(i.a.Component)),y=(a(42),function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t={};return this.props.visible?t.display="block":t.display="none",i.a.createElement("div",{className:"account-details",style:t},this.props.children)}}]),e}(i.a.Component)),k=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(r.a)(this,Object(d.a)(e).call(this))).state={accountDetailsVisible:!1},t.toggleAccountDetails=t.toggleAccountDetails.bind(Object(f.a)(t)),t}return Object(u.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this;window.addEventListener("click",(function(){t.setState({accountDetailsVisible:!1})}))}},{key:"toggleAccountDetails",value:function(t){t.stopPropagation(),this.setState({accountDetailsVisible:!this.state.accountDetailsVisible})}},{key:"render",value:function(){return i.a.createElement("header",{className:"header"},i.a.createElement("a",{href:"/",style:{color:"black"}},i.a.createElement("div",{className:"logo-container"},i.a.createElement("img",{src:b.a,className:"logo"}),i.a.createElement("h1",{className:"title"},"berdbox"))),i.a.createElement(g,{toggleAccountDetails:this.toggleAccountDetails}),i.a.createElement(y,{visible:this.state.accountDetailsVisible},i.a.createElement(v,{icon:"exit_to_app",text:"Sign out",handler:function(){fetch("/api/logout"),window.location.reload()}})))}}]),e}(i.a.Component),j=(a(43),a(44),a(17)),O=a(26),E=a.n(O),x=a(27),w=a.n(x),S=a(20),C=a.n(S),H=a(28),D=a.n(H),I=a(29),N=a.n(I),F=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(r.a)(this,Object(d.a)(e).call(this))).choosePicture=t.choosePicture.bind(Object(f.a)(t)),t}return Object(u.a)(e,t),Object(s.a)(e,[{key:"choosePicture",value:function(t){return-1!==["jpg","jpeg","tiff","gif","bmp","png","svg","pdn","sai","psd","ai"].indexOf(t.toLowerCase())?E.a:-1!==["webm","avi","mov","mp4","m4v","3gp","flv","swf"].indexOf(t.toLowerCase())?w.a:"folder"===t.toLowerCase()?C.a:-1!==["doc","docx","rtf","txt","pdf"].indexOf(t.toLowerCase())?D.a:-1!==["wav","ogg","mp3","flac","m4a"].indexOf(t.toLowerCase())?N.a:C.a}},{key:"render",value:function(){var t=this,e=this.props.active?{background:"#BBDEFB"}:null;return i.a.createElement("div",null,i.a.createElement(j.b,{id:this.props.data.id+"id"},i.a.createElement("table",{style:e,className:"file",onClick:function(e){t.props.handler(e,t)}},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",{style:{width:"40%"}},i.a.createElement("img",{src:this.choosePicture(this.props.data.type),align:"left",style:{width:"100%",height:"30px",maxWidth:"30px",maxHeight:"30px",marginRight:"8px"}}),this.props.data.name),i.a.createElement("td",{style:{width:"30%"}},this.props.data.date),i.a.createElement("td",{style:{width:"30%"}},this.props.data.type))))),i.a.createElement("div",{className:"rightClickMenu"},i.a.createElement(j.a,{id:this.props.data.id+"id"},i.a.createElement(j.c,{onClick:function(e){t.props.dlfile(e,t)}},"Download"),i.a.createElement(j.c,{onClick:function(e){t.props.delfile(e,t)}},"Delete"))))}}]),e}(i.a.Component),P=(a(47),function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t={background:this.props.disabled?"#BBDEFB":"#2196F3"};return i.a.createElement("button",{className:"button",style:t,onClick:this.props.handler},this.props.text)}}]),e}(i.a.Component)),L=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(r.a)(this,Object(d.a)(e).call(this))).state={canSubmit:!1},t.fileChangeHandler=t.fileChangeHandler.bind(Object(f.a)(t)),t.clickHandler=t.clickHandler.bind(Object(f.a)(t)),t}return Object(u.a)(e,t),Object(s.a)(e,[{key:"clickHandler",value:function(t){var e=this;if(t.preventDefault(),t.stopPropagation(),this.state.canSubmit){for(var a=document.getElementById("fileUpload"),n=0;n<a.files.length;n++){var i=a.files[n],c=new FormData;c.append("file",i);var l=this.props.location.pathname.split("/")[2];fetch("/api/uploadFile"+(l?"/"+l:""),{method:"POST",body:c}).then((function(t){return e.props.update()}))}this.props.hide()}}},{key:"fileChangeHandler",value:function(t){t.target.files.length>0?this.setState({canSubmit:!0}):this.setState({canSubmit:!1})}},{key:"render",value:function(){return i.a.createElement("form",{className:"popup",encType:"multipart/form-data",action:"/api/createFile",method:"post",onClick:function(t){return t.stopPropagation()}},i.a.createElement("h1",null,"Upload a file"),i.a.createElement("input",{type:"file",id:"fileUpload",multiple:!0,size:"50",onChange:this.fileChangeHandler}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(P,{disabled:!this.state.canSubmit,text:"upload",style:{width:"100%"},handler:this.clickHandler}))}}]),e}(i.a.Component),B=Object(h.f)(L),A=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(r.a)(this,Object(d.a)(e).call(this))).state={canSubmit:!1},t.clickHandler=t.clickHandler.bind(Object(f.a)(t)),t.changeHandler=t.changeHandler.bind(Object(f.a)(t)),t}return Object(u.a)(e,t),Object(s.a)(e,[{key:"clickHandler",value:function(t){var e=this;if(t.preventDefault(),t.stopPropagation(),this.state.canSubmit){var a=new URLSearchParams,n=!0,i=!1,c=void 0;try{for(var l,o=new FormData(document.getElementById("folder-form"))[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var s=l.value;a.append(s[0],s[1])}}catch(d){i=!0,c=d}finally{try{n||null==o.return||o.return()}finally{if(i)throw c}}var r=this.props.location.pathname.split("/")[2];fetch("/api/createFolder"+(r?"/"+r:""),{method:"post",body:a}).then((function(t){return e.props.update()})),this.props.hide()}}},{key:"changeHandler",value:function(t){t.target.value.length>0?this.setState({canSubmit:!0}):this.setState({canSubmit:!1})}},{key:"render",value:function(){return i.a.createElement("form",{className:"popup",action:"/api/createFolder",method:"post",onClick:function(t){return t.stopPropagation()},id:"folder-form",onSubmit:this.clickHandler},i.a.createElement("h1",null,"Create a folder"),i.a.createElement("input",{type:"text",id:"folder-name",onChange:this.changeHandler,name:"title"}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(P,{disabled:!this.state.canSubmit,text:"upload",style:{width:"100%"},handler:this.clickHandler}))}}]),e}(i.a.Component),_=Object(h.f)(A),M=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(r.a)(this,Object(d.a)(e).call(this))).state={upload:!0,popup:"none"},t.clickHandler=t.clickHandler.bind(Object(f.a)(t)),t.hide=t.hide.bind(Object(f.a)(t)),t}return Object(u.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this;window.addEventListener("click",(function(e){t.state.upload||t.setState({upload:!0}),t.setState({popup:"none"})}))}},{key:"clickHandler",value:function(t){t&&t.stopPropagation(),this.setState({upload:!this.state.upload}),this.props.deselect()}},{key:"hide",value:function(){this.setState({popup:"none"})}},{key:"render",value:function(){var t=this,e={transform:"rotate("+(this.state.upload?"0deg":"405deg")+")"},a={position:"fixed",right:"16px",bottom:(this.state.upload?"28":"178")+"px"},n={position:"fixed",right:"16px",bottom:(this.state.upload?"28":"106")+"px"};return i.a.createElement("div",null,i.a.createElement("div",{style:a,className:"floating-action-button-sm",onClick:function(e){t.clickHandler(e),t.setState({popup:"folder"})}},i.a.createElement("i",{className:"material-icons"},"create_new_folder")),i.a.createElement("div",{style:n,className:"floating-action-button-sm",onClick:function(e){t.clickHandler(e),t.setState({popup:"upload"})}},i.a.createElement("i",{className:"material-icons"},"cloud_upload")),i.a.createElement("div",{className:"floating-action-button-lg",onClick:this.clickHandler},i.a.createElement("i",{style:e,className:"material-icons"},"add")),"upload"===this.state.popup?i.a.createElement(B,{hide:this.hide,update:this.props.update}):null,"folder"===this.state.popup?i.a.createElement(_,{hide:this.hide,update:this.props.update}):null)}}]),e}(i.a.Component),U=a(18),R=a.n(U),V=a(32),T=a.n(V),W=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(r.a)(this,Object(d.a)(e).call(this,t))).update=a.update.bind(Object(f.a)(a)),a.handleFileClick=a.handleFileClick.bind(Object(f.a)(a)),a.dlfile=a.dlfile.bind(Object(f.a)(a)),a.delfile=a.delfile.bind(Object(f.a)(a)),a.keyHandler=a.keyHandler.bind(Object(f.a)(a)),a.deselect=a.deselect.bind(Object(f.a)(a)),a.state={data:void 0,activeIndex:-1},a.last_click=0,a.folderId=a.props.location.pathname.split("/")[2]||"",a.props.history.listen((function(t,e){a.folderId=t.pathname.split("/")[2]||"",a.setState({data:void 0}),a.update()})),a}return Object(u.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this;window.addEventListener("click",(function(){t.setState({activeIndex:-1})})),window.addEventListener("keydown",(function(e){t.keyHandler(e.keyCode)})),this.update(),this.props.history.listen((function(e,a){t.update()}))}},{key:"keyHandler",value:function(t){var e=this;if(-1!==this.state.activeIndex){switch(t){case 13:this.onFileSelect(this.state.data[this.state.activeIndex]);break;case 38:this.setState({activeIndex:(this.state.activeIndex-1+this.state.data.length)%this.state.data.length});break;case 40:this.setState({activeIndex:(this.state.activeIndex+1)%this.state.data.length});break;case 46:if(!this.state.data[this.state.activeIndex])break;fetch("/api/delFile/"+this.state.data[this.state.activeIndex].id).then((function(t){e.update()})),this.setState({data:this.state.data.filter((function(t){return t.id!==e.state.data[e.state.activeIndex].id}))})}}}},{key:"onFileSelect",value:function(t){"folder"===t.type?this.props.history.push("/folder/"+t.id):window.location.href="http://"+window.location.hostname+"/api/getFile/"+t.id}},{key:"handleFileClick",value:function(t,e){t.stopPropagation(),this.setState({activeIndex:e.props.index});e.props.data.type,this.state.data[e.props.index].id;Date.now()-this.last_click<500&&this.onFileSelect(this.state.data[e.props.index]),this.last_click=Date.now()}},{key:"dlfile",value:function(t,e){t.stopPropagation(),this.setState({activeIndex:e.props.index}),window.location.href="http://"+window.location.hostname+"/api/getFile/"+this.state.data[e.props.index].id}},{key:"delfile",value:function(t,e){var a=this;t.stopPropagation(),this.setState({activeIndex:e.props.index}),this.setState({data:this.state.data.filter((function(t){return t.id!==a.state.data[a.state.activeIndex].id}))}),fetch("/api/delFile/"+this.state.data[e.props.index].id).then((function(t){a.update()}))}},{key:"update",value:function(){var t=this;fetch("/api/files/"+this.folderId).then((function(t){return t.json()})).then((function(e){for(var a=[],n=[],i=0;i<e.length;i++)"folder"===e[i].type?a.push(e[i]):n.push(e[i]);var c=function(t,e){return t.name<e.name?-1:t.name>e.name?1:0};a.sort(c),n.sort(c),t.setState({data:[].concat(a,n)})}))}},{key:"deselect",value:function(){this.setState({activeIndex:-1})}},{key:"render",value:function(){var t=this;return i.a.createElement("div",null,i.a.createElement("div",{className:"file-list"},i.a.createElement("table",{className:"file-list-header"},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("th",{style:{width:"40%"}},"Name"),i.a.createElement("th",{style:{width:"30%"}},"Date"),i.a.createElement("th",{style:{width:"30%"}},"Type")))),i.a.createElement("hr",null),this.state.data?0!==this.state.data.length?this.state.data.map((function(e,a){return i.a.createElement(F,{data:e,handler:t.handleFileClick,key:e.id,index:a,active:a===t.state.activeIndex,dlfile:t.dlfile,delfile:t.delfile})})):i.a.createElement("img",{src:T.a,style:{width:"100px",height:"100px"}}):i.a.createElement("img",{src:R.a,style:{width:"100px",height:"100px"}})),i.a.createElement(M,{update:this.update,deselect:this.deselect}))}}]),e}(i.a.Component),J=Object(h.f)(W),z=function(t){function e(){return Object(o.a)(this,e),Object(r.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(k,null),i.a.createElement(J,null))}}]),e}(i.a.Component),$=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(r.a)(this,Object(d.a)(e).call(this))).state={authenticated:!1},t}return Object(u.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this;fetch("/api/isAuthenticated").then((function(t){return t.json()})).then((function(e){e?t.setState({authenticated:!0}):window.location.href="http://"+window.location.hostname}))}},{key:"render",value:function(){return this.state.authenticated?i.a.createElement("div",{style:{animation:"fadeIn .3s"}},i.a.createElement(p.a,null,i.a.createElement(h.c,null,i.a.createElement(h.a,{exact:!0,path:"/",component:z}),i.a.createElement(h.a,{path:"/folder",component:z})))):i.a.createElement("img",{src:R.a})}}]),e}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}]),[[33,1,2]]]);
//# sourceMappingURL=main.1d9ab61f.chunk.js.map